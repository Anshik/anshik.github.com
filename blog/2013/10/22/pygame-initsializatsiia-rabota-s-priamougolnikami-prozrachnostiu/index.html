<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Ещё один блог</title>
    <meta name="description" content="">
    <meta name="author" content="Anshik">

    <link rel="stylesheet" href="/theme/css/foundation.css" />
    <link rel="stylesheet" href="/theme/css/pygment/monokai.css" />
    <link rel="stylesheet" href="/theme/css/custom.css" />

    <link rel="stylesheet" href="/theme/css/magnific-popup.css" />


    <script src="/theme/js/modernizr.js"></script>

    <!-- Feeds -->


    <!-- mathjax config similar to math.stackexchange -->
    <script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			jax: ["input/TeX", "output/HTML-CSS"],
			tex2jax: {
				inlineMath: [ ['$', '$'] ],
				displayMath: [ ['$$', '$$']],
				processEscapes: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
			},
			messageStyle: "none",
			"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
		});
		</script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div class="off-canvas-wrap">
    <div class="inner-wrap">
        <!-- mobile top bar to activate nav -->
        <nav class="tab-bar show-for-small">
            <section class="left-small">
                <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
            </section>

            <section class="middle tab-bar-section">
                <h1 class="title">Ещё&nbsp;один&nbsp;блог</h1>
            </section>
        </nav>

        <!-- mobile side bar nav -->
        <aside class="left-off-canvas-menu">
            <ul class="off-canvas-list">
                <li><a href="">Главная</a></li>
                <li><label>Категории</label></li>
                    <li class="active"><a href="/category/raznoe.html">разное</a></li>

                <li><label>Ссылки</label></li>
                    <li><a href="/pages/training_school.html">Подготовка к школе</a></li>



                <li><label>Соц. сети</label></li>
                    <li><a href="http://vk.com/mnogosala">Я Вконтакте</a></li>
            </ul>
        </aside>

        <!-- top bar nav -->
        <nav class="top-bar hide-for-small-only" data-topbar>
            <ul class="title-area">
                <li class="name">
                    <h1><a href="/">Ещё один блог</a></h1>
                </li>
            </ul>

            <section class="top-bar-section">
                <ul class="right">
                            <li><a href="/pages/about.html">Обо мне</a></li>
                </ul>
            </section>
        </nav>

        <!-- Main Page Content and Sidebar -->
        <section class="main-section">
            <div class="row">
                <!-- Main Content -->
                <div class="medium-9 small-12 columns" role="content">
    <article>
        <h2>Pygame инициализация, работа с прямоугольниками, прозрачностью</h2>
        <div class="entry-content">
            <h2>Инициализация</h2>
<p>Для работы с pygame следует инициализировать необходимые модули, проще всего инициализировать все:
<code>pygame.init()</code><br />
Существует несколько вариантов инициализации окна pygame:<br />
<!-- more --></p>
<h2>Создание рабочей области окна</h2>
<h3>Создание окна требуемого размера.</h3>
<div class="highlight"><pre><span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">320</span><span class="p">,</span> <span class="mi">240</span><span class="p">))</span>
</pre></div>


<h3>Создание окна исходя из размеров фона</h3>
<div class="highlight"><pre><span class="n">background</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;media/img_backgournd.jpg&#39;</span><span class="p">)</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="n">background</span><span class="o">.</span><span class="n">get_size</span><span class="p">())</span>
<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">background</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>


<h2>Работа с прямоугольниками и текстом</h2>
<p>Прямоугольники служат для выбора части поверхностей, для получения размеров областей и др.
Конструктор простейшего прямоугольника выглядит так:</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">pygame</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">r</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>   <span class="c"># 100х50 px</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">r</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span><span class="o">&gt;</span>
</pre></div>


<p>У объекта класса Rect есть множество методов, названия говорят за себя:<br />
['bottom', 'bottomleft', 'bottomright', 'center', 'centerx', 'centery', 'clamp', 'clamp_ip', 'clip', 'collidedict', 'collidedictall',
 'collidelist', 'collidelistall', 'collidepoint', 'colliderect', 'contains', 'copy', 'fit', 'h', 'height', 'inflate', 'inflate_ip',
 'left', 'midbottom', 'midleft', 'midright', 'midtop', 'move', 'move_ip', 'normalize', 'right', 'size', 'top', 'topleft',
 'topright', 'union', 'union_ip', 'unionall', 'unionall_ip', 'w', 'width', 'x', 'y']</p>
<p>Из этих атрибутов я выделю centerx и centery:</p>
<div class="highlight"><pre><span class="n">font</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="s">&#39;media/presentum.ttf&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>      <span class="c"># задание шрифта и размера</span>
<span class="n">text_img</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;Строка для рендеринга&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="mh">0xFF0000</span><span class="p">)</span> <span class="c"># строка, сглаживание, цвет</span>

<span class="n">text_pos</span> <span class="o">=</span> <span class="n">text_img</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span>      <span class="c"># получаем пр-к нашего текста</span>
<span class="n">text_pos</span><span class="o">.</span><span class="n">centerx</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">centerx</span>        <span class="c"># центрируем позицию нашего текста по середине контейнера r</span>
<span class="n">text_pos</span><span class="o">.</span><span class="n">centery</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">centery</span>        <span class="c"># центрируем позицию нашего текста по середине контейнера r</span>

<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text_img</span><span class="p">,</span> <span class="n">text_pos</span><span class="p">)</span>     <span class="c"># копирование текста на экран</span>
<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>             <span class="c"># обновление экрана</span>
</pre></div>


<h2>Прозрачность (Альфа-канал)</h2>
<p>Для загрузки изображения из png файла с альфа каналом следует использовать следующую строчку:  </p>
<p><code>pic_with_alpha = pygame.image.load('media/src_with_alpha.png').convert_alpha()</code>  </p>
<p>Для получения изображения с прозрачным фоном мы редактируем png, удаляем фон, затем сохраняем файл без сохранения цвета прозрачности.</p>
<h3>Создание прозрачности для сложных поверхностей, полигонов и прочего</h3>
<p>Моё решение было следующим:<br />
Немного меняю исходное изображение для того чтобы чёрный цвет не превратился в прозрачный, затем накладываю чёрную маску на изображение, говорю, что чёрный цвет становится прозрачным.</p>
<div class="highlight"><pre><span class="c"># Берём изображение, подгоняем под размер</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;media/src.png&#39;</span><span class="p">)</span>
<span class="n">img_s</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">204</span><span class="p">,</span> <span class="mi">142</span><span class="p">))</span>

<span class="c"># нужно заместить черный в исходном изображении на +1, иначе станет прозрачным</span>
<span class="n">pa_img_s</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">PixelArray</span><span class="p">(</span><span class="n">img_s</span><span class="p">)</span>         <span class="c"># создаем массив для замены цвета</span>
<span class="n">pa_img_s</span><span class="o">.</span><span class="n">replace</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>      <span class="c"># заменяем цвет</span>
<span class="n">img_s</span> <span class="o">=</span> <span class="n">pa_img_s</span><span class="o">.</span><span class="n">surface</span>
<span class="k">del</span> <span class="n">pa_img_s</span>                                <span class="c"># удаляем, иначе блочит поверхность</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="mi">240</span><span class="p">,</span> <span class="mi">146</span><span class="p">))</span>              <span class="c"># поверхность для преобразований</span>
<span class="n">pat</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;media/pattern.png&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">convert_alpha</span><span class="p">()</span>        <span class="c"># накладываем чёрный шаблон, с прозрачными вырезами</span>

<span class="n">s</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">img_s</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>   <span class="c"># копируем наше изображение с &quot;немного не чёрным цветом&quot; на поверхность для преобразований</span>
<span class="n">s</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>     <span class="c"># сверху накладываем (копируем) маску</span>
<span class="n">s</span><span class="o">.</span><span class="n">set_colorkey</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s">&#39;black&#39;</span><span class="p">))</span>       <span class="c"># устанавливаем чёрный цвет прозрачным</span>
</pre></div>


<h2>Выделение части поверхности</h2>
<p>Мой стандартный use-case использования части поверхности (subsurface) &mdash; это копирование части фона для создания эффектов движения, анимации:  </p>
<ul>
<li>копируем часть фона, на котором будет происходить действие</li>
<li>копируем изменение</li>
<li>ждем</li>
<li>снова копируем фон.  </li>
</ul>
<div class="highlight"><pre><span class="c"># задаём фон</span>
<span class="n">background</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;media/img_backgournd.jpg&#39;</span><span class="p">)</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="n">background</span><span class="o">.</span><span class="n">get_size</span><span class="p">())</span>
<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">background</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>


<span class="n">r</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>     <span class="c"># размеры пр-ка, на котором будет производиться действие</span>
<span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;media/ball.png&#39;</span><span class="p">)</span>  <span class="c"># загружаем картинку</span>
<span class="n">bg</span> <span class="o">=</span> <span class="n">background</span><span class="o">.</span><span class="n">subsurface</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>               <span class="c"># создаём копию фона</span>
<span class="n">x_pos_left</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">y_pos</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">while</span> <span class="n">c</span><span class="p">:</span>
    <span class="n">x_pos_left</span> <span class="o">+=</span> <span class="mi">10</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">bg</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>       <span class="c"># копируем фон</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="p">(</span><span class="n">x_pos_left</span><span class="p">,</span> <span class="n">y_pos</span><span class="p">))</span>   <span class="c"># копируем картинку поверх</span>
    <span class="n">c</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>    <span class="c"># обновлять не обязательно весь экран, можно определённую часть.</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mf">0.08</span><span class="p">)</span>                 <span class="c"># задержка, можно использовать pygame-овскую</span>
</pre></div>


<h2>Работа с событиями (events)</h2>
<p>Данный вопрос рассмотрен везде, но не упомянуть его нельзя :)  </p>
<p>``` python простейший выход из приложения по кнопке
    bRunning = True</p>
<div class="highlight"><pre>while bRunning:

    for event in pygame.event.get():
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_ESCAPE:
                bRunning = False
                exit(0) # к примеру
</pre></div>


<div class="highlight"><pre><span class="err">А</span> <span class="err">это</span> <span class="err">пример</span> <span class="err">кастомного</span> <span class="err">события</span>

<span class="sb">``</span><span class="err">`</span> <span class="n">python</span>
<span class="c"># coding=utf-8</span>
<span class="kn">import</span> <span class="nn">pygame</span>

<span class="n">COUNTER</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">USEREVENT</span> <span class="o">+</span> <span class="mi">5</span>  <span class="c"># 24+5 = 29</span>


<span class="k">class</span> <span class="nc">Counter</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">screen</span><span class="p">,</span> <span class="n">background</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">up</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_sub_timer</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coord</span> <span class="o">=</span> <span class="n">coord</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">screen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span>      <span class="c"># сколько секунд считать</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">up</span> <span class="o">=</span> <span class="n">up</span>                <span class="c"># если 1, возрастает счётчик, 0, убывает</span>

        <span class="n">rendtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_colored_text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">rendtext</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span>         <span class="c"># взяли 30 и увеличили размер пр-ка</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bg</span> <span class="o">=</span> <span class="n">background</span><span class="o">.</span><span class="n">subsurface</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="p">))</span>     <span class="c"># сдвинули пр-к и взяли фон</span>

    <span class="k">def</span> <span class="nf">get_colored_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="n">bigfont</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="s">&#39;presentum.ttf&#39;</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="n">rendtext</span> <span class="o">=</span> <span class="n">bigfont</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rendtext</span>

    <span class="k">def</span> <span class="nf">get_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        возвращет 0 если таймер оттикал</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cur_second</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_sub_timer</span> <span class="o">/</span> <span class="mi">10</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_sub_timer</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">up</span><span class="p">:</span>
                <span class="n">new_val</span> <span class="o">=</span> <span class="n">cur_second</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">-</span> <span class="n">cur_second</span>
            <span class="n">rendtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_colored_text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">new_val</span><span class="p">),</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">rendtext</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_sub_timer</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="mi">1</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">768</span><span class="p">))</span>
    <span class="n">background</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;media/screen3.jpg&#39;</span><span class="p">)</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">background</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">set_timer</span><span class="p">(</span><span class="n">COUNTER</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>     <span class="c"># запускаем генерацию even-тов каждые 100мс</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">((</span><span class="mi">350</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span> <span class="n">screen</span><span class="p">,</span> <span class="n">background</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c"># передаём где вывести счётчик, </span>
                                                            <span class="c"># наш экран, фон, сколько секунд считать, 0 - убывает</span>

    <span class="n">b_running</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">while</span> <span class="n">b_running</span><span class="p">:</span>

        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">KEYDOWN</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
                    <span class="n">b_running</span> <span class="o">=</span> <span class="bp">False</span>

            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">COUNTER</span><span class="p">:</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">counter</span><span class="o">.</span><span class="n">get_next</span><span class="p">():</span>
                    <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">set_timer</span><span class="p">(</span><span class="n">COUNTER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>   <span class="c"># значит оттикал таймер, нужно остановить генерацию событий</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
        </div><!-- /.entry-content -->
        <hr/>

    </article>

    <h6><a href="/pages/about.html">Anshik</a> в <a href="/category/raznoe.html">разное</a>  Вт. 22 Октябрь 2013. Tags: <a href="/tag/pygame.html">[pygame</a>, <a href="/tag/python.html">python]</a>, </h6>

    <hr/>
                </div>
                <!-- End Main Content -->
                <!-- Sidebar -->
                <aside class="medium-3 hide-for-small-only columns">



                    <div class="panel">
                        <h5>Социальные сети</h5>
                        <ul class="side-nav">
                                <li><a href="http://vk.com/mnogosala">Я Вконтакте</a></li>
                        </ul>
                    </div>
                </aside>
                <!-- End Sidebar -->
            </div>

            <!-- Footer -->
            <footer class="row">
                <div class="medium-9 small-12">
                    <hr/>
                    <p class="text-center">&copy; Anshik 2012-2015</p>
                </div>
            </footer>
            <!-- End Footer -->
        </section>
        <a class="exit-off-canvas"></a>
    </div><!--off-canvas inner-->
</div><!--off-canvas wrap-->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/theme/js/foundation.min.js"></script>
<script>
    $(document).foundation();
</script>

<script src="/theme/js/jquery.magnific-popup.min.js"></script>
<script>
    $('.gallery').magnificPopup({
        delegate: 'a',
        type: 'image',
        gallery: {
            enabled: true,
            navigateByImgClick: true,
            preload: [1,2]
        },
        image: {
            titleSrc: function(item) {
                if (item.el.attr('caption') && item.el.attr('exif')) {
                    return (item.el.attr('caption').replace(/\\n/g, '<br />') +
                    '<small>' + item.el.attr('title') + ' - ' + item.el.attr('exif') + '</small>');
                }
                return item.el.attr('title') + '<small>' + item.el.attr('exif') + '</small>';
            } }
    });
</script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter30550117 = new Ya.Metrika({id:30550117,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/30550117" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
</body>
</html>